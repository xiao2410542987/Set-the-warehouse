(function(d){"use strict";var n={};NProgress.start();d(document).ready(function(){n.module.init();n.plugin.init();if(d('[data-toggle="tooltip"]').length)d('[data-toggle="tooltip"]').tooltip();return false});d(window).on("load",function(){n.plugin.isotope.init();n.func.resizeNotice();NProgress.done();return false});d(window).on("resize",function(){n.func.resizeNotice();n.func.getChart();return false});d(".js__full_screen").on("click",function(){d(document).fullScreen(true)});n.module={init:function(){n.module.accordion();n.module.card();n.module.css(d(".js__width"),"width");n.module.dropDown("js__drop_down",false);n.module.logout();n.module.menu();n.module.tab(".js__tab","li");n.module.toggle();n.module.todo();return false},accordion:function(){d(".js__accordion").each(function(){var o=d(this);o.find(".js__control").on("click",function(e){e.preventDefault();if(d(this).parent().hasClass("active")){d(this).parent().removeClass("active");d(this).next().stop().slideUp(400)}else{var t=d(this);o.find(".active").children(".js__content").stop().slideUp(400);o.find(".active").removeClass("active");d(this).parent().addClass("active");d(this).next(".js__content").slideDown(400,function(){if(o.parents(".main-menu").length){d(".main-menu .content").mCustomScrollbar("scrollTo",t,{timeout:0,scrollInertia:200})}})}})});return false},card:function(){d(".js__card").each(function(){var e=d(this);e.on("click",".js__card_minus",function(){e.toggleClass("card-closed");e.find(".js__card_content").stop().slideToggle(400)});e.on("click",".js__card_remove",function(){e.slideUp(400)})});return false},css:function(e,o,n){if(!n){n=o}e.each(function(){var e=d(this).data(n);if(e){var t={};t[o]=e;d(this).css(t)}});return false},dropDown:function(o,n){var i=d("."+o);i.each(function(){var t=d(this);t.on("click",".js__drop_down_button",function(e){e.preventDefault();if(d(window).width()<1025||n===false){if(t.hasClass("active")){t.removeClass("active")}else{i.removeClass("active");t.addClass("active")}}return false})});d("html").on("click",function(e){var t=d(e.target);if(!(t.hasClass(o)||t.parents("."+o).length)){d("."+o+".active").removeClass("active")}});return false},logout:function(){d(".js__logout").on("click",function(e){e.preventDefault();swal({title:"退出登录?",text:"你确定要退出登录吗?",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是的，我要退出!",cancelButtonText:"不小心按错了!",closeOnConfirm:false,closeOnCancel:true,confirmButtonColor:"#f60e0e"},function(e){if(e){d.ajax({type:"GET",url:"http://120.79.46.8:8080/storage/storage/workers/exit",success:function(e){console.log(e);localStorage.setItem("comid",null)},error:function(e){if(e.statusText=="timeout"){alert("请求超时")}},complete:function(){}});swal({title:"Logout success",text:"See you later!",type:"success",confirmButtonColor:"#304ffe"},function(e){window.location.href="http://120.79.46.8/login.html"})}else{}});return false})},menu:function(){d(".js__menu_mobile").on("click",function(){d("html").toggleClass("menu-active");d(window).trigger("resize")});d(".js__menu_close").on("click",function(){d("html").removeClass("menu-active")});d("body").on("click",function(e){if(d("html.menu-active").length&&d(window).width()<800){var t=d(e.target);if(!(t.hasClass("main-menu")||t.hasClass("js__menu_mobile")||t.parents(".main-menu").length||t.parents(".js__menu_mobile").length)){d("html").removeClass("menu-active")}}});return false},tab:function(e,i){d(".js__tab").each(function(){var n=d(this);n.on("click",".js__tab_control",function(e){var t=d(this).data("target");e.preventDefault();n.find(".js__tab_content").removeClass("js__active");n.find(".js__tab_control").removeClass("js__active");d(this).addClass("js__active");if(t){d(t).addClass("js__active")}else{var o;if(i){o=d(this).parents(i).first().index()}else{o=d(this).index()}n.find(".js__tab_content").eq(o).addClass("js__active")}return false})});return false},todo:function(){d(".js__todo_widget").each(function(){var e=d(this),t=d(this).find(".js__todo_list"),o=d(this).find(".js__todo_value"),n=d(this).find(".js__todo_button");n.on("click",function(){if(o.val()!=""){var e=Math.floor(Math.random()*1e8+1);t.append('<div class="todo-item"><div class="checkbox"><input type="checkbox" id="todo-'+e+'"><label for="todo-'+e+'">'+o.val()+"</label></div></div>");o.val("")}else{alert("You must enter task name.")}return false})});return false},toggle:function(){d(".js__toggle_open").on("click",function(e){e.preventDefault();if(d(d(this).data("target")).hasClass("active")){}else{d(".js__toggle").removeClass("active")}d(d(this).data("target")).toggleClass("active");return false});d(".js__toggle_close").on("click",function(e){e.preventDefault();d(this).parents(".js__toggle").removeClass("active");return false});d("body").on("click",function(e){if(d(".js__toggle").hasClass("active")){var t=d(e.target);if(!(t.hasClass("js__toggle_open")||t.hasClass("js__toggle")||t.parents(".js__toggle_open").length||t.parents(".js__toggle").length)){d(".js__toggle").removeClass("active")}}});return false}};n.func={childReturnWidth:function(e,t){if(e.children("li").children(".sub-menu").length){var o=0;e.children("li").children(".sub-menu").each(function(){var e=n.func.childReturnWidth(d(this),t+d(this).outerWidth());if(e>o){o=e}});return o}else{return t}},getResponsiveSettings:function(e){var t=e.data("responsive"),o=[];if(t){while(t.indexOf("'")>-1){t=t.replace("'",'"')}var n=JSON.parse(t);d.each(n,function(e,t){o[o.length]={breakpoint:e,settings:{slidesToShow:t,slidesToScroll:t}}})}return o},getChart:function(){d(".js__chart").each(function(){var e=d(this),t=e.data("chart"),o=[],n=e.attr("id"),i=e.data("type"),a,s,l,r=d(this).hasClass("black-chart")?"#1b1c1c":"#ffffff";if(t){var c=t.split("|"),u,f;for(u=0;u<c.length;u++){c[u]=c[u].trim();o[u]=c[u].split("/");for(f=0;f<o[u].length;f++){if(o[u][f].indexOf("'")>-1){while(o[u][f].indexOf("'")>-1){o[u][f]=o[u][f].replace("'","")}o[u][f]=o[u][f].trim()}else{if(o[u][f].indexOf(".")>-1){o[u][f]=parseFloat(o[u][f])}else{o[u][f]=parseInt(o[u][f],10)}}}}s=google.visualization.arrayToDataTable(o);if(d(this).hasClass("black-chart")){switch(i){case"circle":a={chartArea:{left:0,top:0,width:"100%",height:"75%"},colors:["#304ffe","#f60e0e","#ffa000"],fontName:"Poppins",backgroundColor:r,legend:{position:"bottom",textStyle:{color:"#484848"}},vAxis:{baselineColor:"#484848",gridlines:{color:"#484848"},textStyle:{color:"#484848"}},hAxis:{textStyle:{color:"#484848"}}};l=new google.visualization.PieChart(document.getElementById(n));break;case"donut":a={pieHole:.3,chartArea:{left:0,top:0,width:"100%",height:"75%"},legend:{position:"bottom",textStyle:{color:"#484848"}},colors:["#304ffe","#f60e0e","#ffa000"],fontName:"Poppins",backgroundColor:r};l=new google.visualization.PieChart(document.getElementById(n));break;case"column":a={chartArea:{left:30,top:10,width:"100%",height:"80%"},colors:["#304ffe"],fontName:"Poppins",backgroundColor:r,vAxis:{baselineColor:"#484848",gridlines:{color:"#484848"},textStyle:{color:"#484848"}},hAxis:{textStyle:{color:"#484848"}}};l=new google.visualization.ColumnChart(document.getElementById(n));break;case"curve":a={chartArea:{left:30,top:10,width:"90%",height:"80%"},curveType:"function",colors:["#304ffe","#f60e0e","#ffa000"],fontName:"Poppins",backgroundColor:r,vAxis:{baselineColor:"#484848",gridlines:{color:"#484848"},textStyle:{color:"#484848"}},hAxis:{textStyle:{color:"#484848"}}};l=new google.visualization.LineChart(document.getElementById(n));break;case"line":a={chartArea:{left:30,top:10,width:"90%",height:"80%"},fontName:"Poppins",backgroundColor:r,vAxis:{baselineColor:"#484848",gridlines:{color:"#484848"},textStyle:{color:"#484848"}},hAxis:{textStyle:{color:"#484848"}}};l=new google.visualization.LineChart(document.getElementById(n));break;case"area":a={chartArea:{left:50,top:20,width:"100%",height:"70%"},legend:{position:"bottom"},fontName:"Poppins",backgroundColor:r,vAxis:{baselineColor:"#484848",gridlines:{color:"#484848"},textStyle:{color:"#484848"}},hAxis:{textStyle:{color:"#484848"}}};l=new google.visualization.AreaChart(document.getElementById(n));break}}else{switch(i){case"circle":a={chartArea:{left:0,top:0,width:"100%",height:"75%"},legend:{position:"bottom"},colors:["#304ffe","#f60e0e","#ffa000"],fontName:"Poppins",backgroundColor:r};l=new google.visualization.PieChart(document.getElementById(n));break;case"donut":a={pieHole:.3,chartArea:{left:0,top:0,width:"100%",height:"75%"},legend:{position:"bottom"},colors:["#304ffe","#f60e0e","#ffa000"],fontName:"Poppins",backgroundColor:r};l=new google.visualization.PieChart(document.getElementById(n));break;case"column":a={chartArea:{left:30,top:10,width:"100%",height:"80%"},colors:["#304ffe"],fontName:"Poppins",backgroundColor:r};l=new google.visualization.ColumnChart(document.getElementById(n));break;case"curve":a={chartArea:{left:30,top:10,width:"90%",height:"80%"},curveType:"function",colors:["#304ffe","#f60e0e","#ffa000"],fontName:"Poppins",backgroundColor:r};l=new google.visualization.LineChart(document.getElementById(n));break;case"line":a={chartArea:{left:30,top:10,width:"90%",height:"80%"},fontName:"Poppins",backgroundColor:r};l=new google.visualization.LineChart(document.getElementById(n));break;case"area":a={chartArea:{left:50,top:20,width:"100%",height:"70%"},legend:{position:"bottom"},fontName:"Poppins",backgroundColor:r};l=new google.visualization.AreaChart(document.getElementById(n));break}}l.draw(s,a)}})},resizeNotice:function(){d(".notice-popup").each(function(){var e=d(this),t=parseInt(e.data("space"),10)>0?parseInt(e.data("space"),10):75,o=d(window).height()-t;e.attr("style","");if(e.height()>o){e.css({height:o})}})}};n.plugin={init:function(){n.plugin.chart();n.plugin.mCustomScrollbar();n.plugin.select2();n.plugin.ui.accordion();n.plugin.ui.slider();n.plugin.ui.sortable();n.plugin.ui.tabs();n.plugin.waves();n.plugin.isotope.filter();return false},chart:function(){if(d(".js__chart").length){google.charts.load("current",{packages:["corechart"]});google.charts.setOnLoadCallback(n.func.getChart)}return false},isotope:{init:function(){setTimeout(function(){d(".js__filter_isotope").each(function(){var e=d(this);e.find(".js__isotope_items").isotope({itemSelector:".js__isotope_item",layoutMode:"cellsByRow"})})},100);return false},filter:function(){d(".js__filter_isotope").each(function(){var t=d(this);t.on("click",".js__filter_control",function(e){e.preventDefault();if(!d(this).hasClass(".js__active")){t.find(".js__filter_control").removeClass("js__active");d(this).addClass("js__active");t.find(".js__isotope_items").isotope({filter:d(this).data("filter")})}return false})});return false}},mCustomScrollbar:function(){if(d(".main-menu").length){d(".main-menu .content").mCustomScrollbar()}if(d(".notice-popup").length){d(".notice-popup .content").mCustomScrollbar()}return false},select2:function(){d(".js__select2").each(function(){var e=d(this).data("min-results"),t=d(this).data("container-class");if(e){if(e==="Infinity"){d(this).select2({minimumResultsForSearch:Infinity})}else{d(this).select2({minimumResultsForSearch:parseInt(e,10)})}if(t){d(this).on("select2:open",function(){d(".select2-container--open").addClass(t);return false})}}else{d(this).select2()}});return false},ui:{accordion:function(){if(d(".js__ui_accordion").length){d(".js__ui_accordion").accordion({heightStyle:"content",collapsible:true})}return false},slider:function(){d(".js__ui_slider").each(function(){var e=d(this),t=e.find(".js__slider_range"),o=e.find(".js__slider_amount"),n=parseInt(e.data("min"),10),i=parseInt(e.data("max"),10),a=parseInt(e.data("value-1"),10),s=parseInt(e.data("value-2"),10),l=e.data("range");if(s>0){t.slider({range:true,min:n,max:i,values:[a,s],slide:function(e,t){o.val("$"+t.values[0]+" - $"+t.values[1])}});o.val("$"+t.slider("values",0)+" - $"+t.slider("values",1))}else{t.slider({range:l,min:n,max:i,value:a,slide:function(e,t){o.val("$"+t.value)}});o.val("$"+t.slider("value"))}});return false},sortable:function(){if(d(".js__sortable").length){d(".js__sortable").sortable({revert:true,start:function(e,t){t.placeholder.height(t.item.height()-20);t.placeholder.css("visibility","visible")}})}return false},tabs:function(){if(d(".js__ui_tab").length){d(".js__ui_tab").tabs()}return false}},waves:function(){if(d(".js__control").length){Waves.attach(".js__control");Waves.init()}return false}}})(jQuery);